<!doctype html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="lib/featurelabel/featurelabel.css">
    <link rel="stylesheet" href="lib/Leaflet.PBFLayer/src/StaticLabel/label.css">

    <!--font-family: 'Open Sans', sans-serif;-->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'
          rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
<style>
    body, html, #map{
        height: 100%;
        width: 100%;
    }
</style>
</head>
<body ng-app="SpatialViewer">

<div id="map"></div>

<![endif]-->

<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="bower_components/jquery-ui/ui/minified/jquery-ui.min.js"></script>

<script src="lib/jquery.layout-latest.min.js"></script>
<script src="lib/jquery.csv-0.71.min.js"></script>
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>

<script type='text/javascript' src='lib/Leaflet.PBFLayer/dist/Leaflet.PBFLayer.js'></script>


<script>
    var map = L.map('map').setView([24.284523, 90.958557], 8);
    L.tileLayer('http://{s}.tiles.mapbox.com/v3/examples.map-qfyrx5r8/{z}/{x}/{y}.png').addTo(map);


    var pbfSource = new L.TileLayer.PBFSource({
        url: 'http://spatialserver.spatialdev.com/services/vector-tiles/FSPCicos2013/{z}/{x}/{y}.pbf',
        debug: false,
        clickableLayers: [],
        getIDForLayerFeature: function(feature) {
            return "";
        },
        /**
         * The filter function gets called when iterating though each vector tile feature (vtf). You have access
         * to every property associated with a given feature (the feature, and the layer). You can also filter
         * based of the context (each tile that the feature is drawn onto).
         *
         * Returning false skips over the feature and it is not drawn.
         *
         * @param feature
         * @returns {boolean}
         */
        filter: function(feature, context) {
            return true;
        }
    });

    //Globals that we can change later.
    var fillColor = 'rgba(149,139,255,0.4)';
    var strokeColor = 'rgb(20,20,20)';

    pbfSource.styleFor = pbfStyle;
    function pbfStyle(feature) {
        var style = {};
        var type = feature.type;
        switch (type) {
            case 1: //'Point'
                style.color = 'rgba(252,146,114,0.6)';
                style.radius = 5;
            case 2: //'LineString'
                style.color = 'rgba(161,217,155,0.8)';
                style.size = 3;
            case 3: //'Polygon'
                style.color = fillColor;
                style.outline = {
                    color: strokeColor,
                    size: 2
                };
        }
        return style;
    }

    //Add layer
    map.addLayer(pbfSource);

</script>
</body>
</html>
